<html>

	<head>
		<link href="/static/css/bootstrap.css" rel="stylesheet">
		<style type="text/css">
			body {
				padding-top: 20px;
				padding-bottom: 40px;
			}

			.playoff_probability {
				padding: 20px;
				background-color: rgba({{ simulation.non_playoff_probability|add:"0" }}, {{ simulation.playoff_probability|add:"0" }}, 0, 0.7);
				position: fixed;
				bottom: 0;
				left: 0;
				right: 0;
			}

			.playoff_probability p {
				padding: 0;
				margin: 0;
				font-size: 24px;
				font-weight: bold;
				color: #fff;
			}
		</style>
		<link href="/static/css/bootstrap-responsive.css" rel="stylesheet">
	</head>

	<body>

		<div class="playoff_probability">
			<center>
				<p>
					{{ my_team }} has a {{ simulation.playoff_probability|floatformat:1 }}% chance of making the playoffs this season!
				</p>
			</center>
		</div>

		<div class="container">

			<div class="hero-unit">
				<h1 class="muted">Who should I cheer for?</h1>
				<p>
					Which teams should you cheer for on any given night, to give your favorite team
					the best chance of making the playoffs this year?
				</p>

				<p>
					<strong>Made by Christopher Troup (<a href="https://twitter.com/minichate">@minichate</a>)</strong>
					<br />
					<a href="https://twitter.com/minichate" class="twitter-follow-button" data-show-count="false">Follow @minichate</a>
					<script>
						! function(d, s, id) {
							var js, fjs = d.getElementsByTagName(s)[0];
							if (!d.getElementById(id)) {
								js = d.createElement(s);
								js.id = id;
								js.src = "//platform.twitter.com/widgets.js";
								fjs.parentNode.insertBefore(js, fjs);
							}
						}(document, "script", "twitter-wjs");
					</script>
				</p>

			</div>

			<div class="row-fluid">
				<div class="span12">
					<strong>What is your favorite team?</strong>
					<form action="/" method="GET" class="form-inline">
						<select name="team">
							{% for team in teams %}
							<option{% if team == my_team %} selected="selected"{% endif %}>
								{{ team }}</option>
								{% endfor %}
						</select>

						<input type="submit" class="btn" />
					</form>
				</div>
			</div>

			<div class="row-fluid">
				<div class="span12">
					<p>
						We simulated {{ simulation.N }} seasons on {{ simulation.run_at }} UTC. We've found that the following
						list of results optimize {{ simulation.my_team }}'s chances of making the playoffs this year:
					</p>
				</div>
			</div>

			{% regroup game_results by date as games %}

			{% for game in games %}
			<div class="row-fluid">
			<h3>{{ game.grouper }}</h3>
			<br />
			</div>

			{% for game_result in game.list %}
				{% if not forloop.counter|divisibleby:2 %}
				<div class="row-fluid">
				{% endif %}
				<div class="span6">
					<div class="well well-small">
						<h4><img src="/static/img/{{ game_result.home }}.gif" width="32" /> {{ game_result.home }} vs. <img src="/static/img/{{ game_result.away }}.gif" width="32" /> {{ game_result.away }}</h4>
						<p>

							{% if game_result.desired == my_team %}
							Cheer for {{ my_team }} of course!
							{% elif game_result.desired %}
							Cheer for {{ game_result.desired}} -- A {{ game_result.desired}} win lifts {{ my_team }}'s chances of making the playoffs
							by <span class="label label-success">{{ game_result.lift_percentage|floatformat:2 }}%</span>
							{% else %}
							The result of this game doesn't matter -- in no simulation did it affect the outcome of {{ simulation.my_team}}
							making the playoffs this year.
							{% endif %}
						</p>
					</div>
				</div>
				{% if forloop.counter|divisibleby:2 or forloop.last %}
				</div>
				{% endif %}
			{% endfor %}

			<br />
			{% endfor %}
		</div>
	</body>

</html>